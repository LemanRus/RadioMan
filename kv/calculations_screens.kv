<CalculationsScreenManager>:
    CalculationsScreen:
    LEDResistorCalculationScreen:

<LEDResistorCalculationScreen>:
    name: "led_resistor_calculation_screen"

    MDScrollView:
        on_parent: root.build_menu()
        pos_hint: {"top": (root.height - led_resistor_top_bar.height) / root.height}
        size_hint_y: (root.height - led_resistor_top_bar.height) / root.height

        MDGridLayout:
            id: grid
            cols: 1
            adaptive_height: True
            size_hint_x: None
            width: root.width
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(5)

                MDLabel:
                    text: "Напряжение источника питания, В:"

                MDTextField:
                    id: led_resistor_source_voltage_input
                    halign: "center"
                    on_text_validate:
                        root.led_calculate(self.text, \
                        led_resistor_led_voltage_input.text, \
                        led_resistor_led_current_input.text, \
                        led_resistor_led_qty_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0

                MDLabel:
                    text: "Напряжение питания светодиода, В:"

                MDTextField:
                    id: led_resistor_led_voltage_input
                    halign: "center"
                    on_text_validate:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        self.text, \
                        led_resistor_led_current_input.text, \
                        led_resistor_led_qty_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(5)

                MDLabel:
                    text: "Ток светодиода, мА:"

                MDTextField:
                    id: led_resistor_led_current_input
                    halign: "center"
                    on_text_validate:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        led_resistor_led_voltage_input.text, \
                        self.text, \
                        led_resistor_led_qty_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(5)

                MDLabel:
                    text: "Количество светодиодов:"

                MDTextField:
                    id: led_resistor_led_qty_input
                    halign: "center"
                    on_text_validate:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        led_resistor_led_voltage_input.text, \
                        led_resistor_led_current_input.text, \
                        self.text)

#                MDCard:
#                    size_hint_x: 0.4
#                    on_parent: root.build_menu()
#                    on_release: root.menu.open()
#                    id: resistor_marking_menu
#                    MDLabel:
#                        id: resistor_marking_menu_name
#                        text: "Выберите"
#                        on_text: led_vol_input.text = str(root.diodes[self.text][0])
#                        on_text: led_cur_input.text = str(root.diodes[self.text][1])
#                    BoxLayout:
#                        size_hint_x: 0.2
#                        MDIcon:
#                            icon: "chevron-down"
#                            pos_hint: {"center_x": .5, "center_y": .5}
#

            MDRelativeLayout:
                size_hint_y: None
                height: calc_led_resistor.height

                MDRaisedButton:
                    id: calc_led_resistor
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        led_resistor_led_voltage_input.text, \
                        led_resistor_led_current_input.text, \
                        led_resistor_led_qty_input.text)


#            MDCard:
#                MDLabel:
#                    text: "Результат:"
#            BoxLayout:
#                MDCard:
#                    MDLabel:
#                        text: "Расчётное сопротивление:"
            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(5)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        text: "Расчётное сопротивление:"

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        id: led_result

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        text: "Стандартное значение:"

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        id: led_e24

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        text: "Рассеиваемая на резисторе мощность:"

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        id: led_res_power

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        text: "Потребляемый ток:"

                    MDLabel:
                        size_hint_y: None
                        height: sp(self.font_size + 10)
                        id: led_cur

    MDTopAppBar:
        id: led_resistor_top_bar
        title: "Расчёт резисторов для светодиодов"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1