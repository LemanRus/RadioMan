<CalculationsScreenManager>:
    CalculationsScreen:
    LEDResistorCalculationScreen:
    InductorCalculationSelectScreen:
    InductorCalculateInductionScreen:
    InductorCalculateSizeScreen:
    ParallelResistorCalculationScreen:
    SerialCapacitorCalculateScreen:
    VoltageDividerCalculateSelectScreen:
    VoltageDividerCalculateVoltageScreen:
    VoltageDividerCalculateResistanceScreen:
    LMRegulatorCalculateSelectScreen:
    LMRegulatorCalculateVoltageScreen:
    LMRegulatorCalculateCurrentScreen:


<LEDResistorCalculationScreen>:
    name: "led_resistor_calculation_screen"

    MDScrollView:
        on_parent: root.build_menu()
        pos_hint: {"top": (root.height - led_resistor_top_bar.height) / root.height}
        size_hint_y: (root.height - led_resistor_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Напряжение источника питания, В:"

                MDTextField:
                    id: led_resistor_source_voltage_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: led_resistor_led_voltage_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Напряжение питания светодиода, В:"

                MDTextField:
                    id: led_resistor_led_voltage_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: led_resistor_led_current_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Ток светодиода, мА:"

                MDTextField:
                    id: led_resistor_led_current_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: led_resistor_led_qty_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Количество светодиодов:"

                MDTextField:
                    id: led_resistor_led_qty_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        led_resistor_led_voltage_input.text, \
                        led_resistor_led_current_input.text, \
                        self.text)

#                MDCard:
#                    size_hint_x: 0.4
#                    on_parent: root.build_menu()
#                    on_release: root.menu.open()
#                    id: resistor_marking_menu
#                    MDLabel:
#                        id: resistor_marking_menu_name
#                        text: "Выберите"
#                        on_text: led_vol_input.text = str(root.diodes[self.text][0])
#                        on_text: led_cur_input.text = str(root.diodes[self.text][1])
#                    BoxLayout:
#                        size_hint_x: 0.2
#                        MDIcon:
#                            icon: "chevron-down"
#                            pos_hint: {"center_x": .5, "center_y": .5}
#

            MDRelativeLayout:
                size_hint_y: None
                height: calc_led_resistor.height

                MDRaisedButton:
                    id: calc_led_resistor
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.led_calculate(led_resistor_source_voltage_input.text, \
                        led_resistor_led_voltage_input.text, \
                        led_resistor_led_current_input.text, \
                        led_resistor_led_qty_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Расчётное сопротивление:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: led_result

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Стандартное значение:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: led_e24

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Рассеиваемая на резисторе мощность:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: led_res_power

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Потребляемый ток:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: led_cur

    MDTopAppBar:
        id: led_resistor_top_bar
        title: "Расчёт резисторов для светодиодов"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<InductorCalculationSelectScreen>:
    name: "inductor_calculation_select_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - inductor_select_top_bar.height) / root.height}
        size_hint_y: (root.height - inductor_select_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "inductor_calculate_induction_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/th_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "inductor_calculate_induction_screen"

                MDLabel:
                    text: "Расчёт индуктивности"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "inductor_calculate_size_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/smd_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "inductor_calculate_size_screen"

                MDLabel:
                    text: "Расчёт числа витков и размера"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

    MDTopAppBar:
        id: inductor_select_top_bar
        title: "Расчёт катушки индуктивности"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<InductorCalculateInductionScreen>:
    name: "inductor_calculate_induction_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - inductor_induction_top_bar.height) / root.height}
        size_hint_y: (root.height - inductor_induction_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Число витков:"

                MDTextField:
                    id: inductor_turns_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: inductor_diameter_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Диаметр каркаса, мм:"

                MDTextField:
                    id: inductor_diameter_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: inductor_length_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Длина намотки, мм:"

                MDTextField:
                    id: inductor_length_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate:
                        root.inductor_calculate_henrys(inductor_turns_input.text, \
                        inductor_diameter_input.text, inductor_length_input.text)

            MDRelativeLayout:
                size_hint_y: None
                height: calc_led_resistor.height

                MDRaisedButton:
                    id: calc_led_resistor
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.inductor_calculate_henrys(inductor_turns_input.text, \
                        inductor_diameter_input.text, inductor_length_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Расчётная индуктивность:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: induction

    MDTopAppBar:
        id: inductor_induction_top_bar
        title: "Расчёт индуктивности"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<InductorCalculateSizeScreen>:
    name: "inductor_calculate_size_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - inductor_size_top_bar.height) / root.height}
        size_hint_y: (root.height - inductor_size_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Индуктивность, мкГн:"

                MDTextField:
                    id: induction_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: inductor_diameter_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Диаметр каркаса, мм:"

                MDTextField:
                    id: inductor_diameter_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: inductor_wire_diameter_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Диаметр провода, мм:"

                MDTextField:
                    id: inductor_wire_diameter_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate:
                        root.inductor_calculate_turns(induction_input.text, \
                        inductor_diameter_input.text, inductor_wire_diameter_input.text)

            MDRelativeLayout:
                size_hint_y: None
                height: calc_led_resistor.height

                MDRaisedButton:
                    id: calc_led_resistor
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.inductor_calculate_turns(induction_input.text, \
                        inductor_diameter_input.text, inductor_wire_diameter_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Расчётное число витков:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: inductor_turns

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Целое число витков:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: inductor_turns_int

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Расчётная длина намотки, мм:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: inductor_length

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Длина намотки при целом числе витков, мм:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: inductor_length_int

    MDTopAppBar:
        id: inductor_size_top_bar
        title: "Расчёт числа витков и размера"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<ParallelResistorCalculationScreen>:
    name: "parallel_resistor_calculation_screen"
    on_pre_enter: self.reset()

    MDScrollView:
        pos_hint: {"top": (root.height - parallel_resistor_top_bar.height) / root.height}
        size_hint_y: (root.height - parallel_resistor_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDList:
                id: par_res_box
                spacing: "10dp"
                padding: "15dp", "10dp"

            MDRelativeLayout:
                size_hint_y: None
                height: add_parallel_resistor_btn.height

                MDRaisedButton:
                    id: add_parallel_resistor_btn
                    text: "Добавить резистор"
                    size_hint: None, None
                    pos_hint: {"left": 0}
                    on_release: root.add_resistor()

                MDRaisedButton:
                    id: reset_parallel_resistor_btn
                    text: "Очистить"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release: root.reset()

                MDRaisedButton:
                    id: calc_parallel_resistor_btn
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"right": 1}
                    on_release: root.par_res_calculate()

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Сопротивление:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: par_res_output

    MDTopAppBar:
        id: parallel_resistor_top_bar
        title: "Параллельное соединение резисторов"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<SerialCapacitorCalculateScreen>:
    name: "serial_capacitor_calculate_screen"
    on_pre_enter: self.reset()

    MDScrollView:
        pos_hint: {"top": (root.height - serial_capacitor_top_bar.height) / root.height}
        size_hint_y: (root.height - serial_capacitor_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDList:
                id: ser_cap_box
                spacing: "10dp"
                padding: "15dp", "10dp"

            MDRelativeLayout:
                size_hint_y: None
                height: add_serial_capacitor_btn.height

                MDRaisedButton:
                    id: add_serial_capacitor_btn
                    text: "Добавить конденсатор"
                    size_hint: None, None
                    pos_hint: {"left": 0}
                    on_release: root.add_capacitor()

                MDRaisedButton:
                    id: reset_serial_capacitor_btn
                    text: "Очистить"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release: root.reset()

                MDRaisedButton:
                    id: calc_serial_capacitor_btn
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"right": 1}
                    on_release: root.ser_cap_calculate()

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Ёмкость:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: ser_cap_output

    MDTopAppBar:
        id: serial_capacitor_top_bar
        title: "Последовательное соединение конденсаторов"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<VoltageDividerCalculateSelectScreen>:
    name: "voltage_divider_calculate_select_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - voltage_divider_top_bar.height) / root.height}
        size_hint_y: (root.height - voltage_divider_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "voltage_divider_calculate_voltage_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/th_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "voltage_divider_calculate_voltage_screen"

                MDLabel:
                    text: "Расчёт выходного напряжения"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "voltage_divider_calculate_resistance_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/smd_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "voltage_divider_calculate_resistance_screen"

                MDLabel:
                    text: "Расчёт сопротивления"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

    MDTopAppBar:
        id: voltage_divider_top_bar
        title: "Делитель напряжения"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<VoltageDividerCalculateVoltageScreen>:
    name: "voltage_divider_calculate_voltage_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - voltage_divider_voltage_top_bar.height) / root.height}
        size_hint_y: (root.height - voltage_divider_voltage_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Напряжение источника питания, В"

                MDTextField:
                    id: v_in
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: r1.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Сопротивление R1, Ом:"

                MDTextField:
                    id: r1
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: r2.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Сопротивление R2, Ом:"

                MDTextField:
                    id: r2
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: root.divider_calculate_vout(v_in.text, r1.text, r2.text)

            MDRelativeLayout:
                size_hint_y: None
                height: calc_divider_voltage.height

                MDRaisedButton:
                    id: calc_divider_voltage
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release: root.divider_calculate_vout(v_in.text, r1.text, r2.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Выходное напряжение, В:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: v_out

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Коэффициент делителя:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: divider_rate

    MDTopAppBar:
        id: voltage_divider_voltage_top_bar
        title: "Делитель напряжения"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<VoltageDividerCalculateResistanceScreen>:
    name: "voltage_divider_calculate_resistance_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - voltage_divider_resistance_top_bar.height) / root.height}
        size_hint_y: (root.height - voltage_divider_resistance_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Напряжение источника питания, В"

                MDTextField:
                    id: v_in_r
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: v_out_r.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Выходное напряжение, В:"

                MDTextField:
                    id: v_out_r
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: r1_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Сопротивление R1, Ом:"

                MDTextField:
                    id: r1_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: root.divider_calculate_r(v_in_r.text, v_out_r.text, r1_input.text)

            MDRelativeLayout:
                size_hint_y: None
                height: calc_divider_resistance.height

                MDRaisedButton:
                    id: calc_divider_resistance
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release: root.divider_calculate_r(v_in_r.text, v_out_r.text, r1_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Сопротивление R2, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: r2_calculated

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Коэффициент делителя:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: divider_rate_r

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Резистор стандартного ряда, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: r2_e24

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Выходное напряжение с резистором из стандартного ряда:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: vout_e24

    MDTopAppBar:
        id: voltage_divider_resistance_top_bar
        title: "Делитель напряжения"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<LMRegulatorCalculateSelectScreen>:
    name: "lm_regulator_calculate_select_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - lm_regulator_top_bar.height) / root.height}
        size_hint_y: (root.height - lm_regulator_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "lm_regulator_voltage_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/th_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "lm_regulator_voltage_screen"

                MDLabel:
                    text: "Стабилизатор напряжения"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

            MDCard:
                ripple_behavior: True
                size_hint_y: None
                height: self.minimum_height
                spacing: "20sp"
                padding: "15sp"
                on_release: root.parent.current = "lm_regulator_current_screen"
                elevation: 1

                MDIconButton:
                    ripple_scale: 0
                    size_hint_y: None
                    icon: "media/smd_resistor.png"
                    icon_size: "50sp"
                    pos_hint: {"center_y": 0.5}
                    on_release: root.parent.current = "lm_regulator_current_screen"

                MDLabel:
                    text: "Стабилизатор тока"
                    shorten: True
                    shorten_from: "right"
                    size_hint_y: None
                    pos_hint: {"center_y": 0.5}

    MDTopAppBar:
        id: lm_regulator_top_bar
        title: "LM317/LM350/LM338 калькулятор"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<LMRegulatorCalculateVoltageScreen>:
    name: "lm_regulator_voltage_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - lm_regulator_voltage_top_bar.height) / root.height}
        size_hint_y: (root.height - lm_regulator_voltage_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Выходное напряжение, В"

                MDTextField:
                    id: lm317_vout_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: lm317_r1_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Сопротивление R1, Ом:"

                MDTextField:
                    id: lm317_r1_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: lm317_iout_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Ток нагрузки, А:"

                MDTextField:
                    id: lm317_iout_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: lm317_vin_input.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Входное напряжение, В:"

                MDTextField:
                    id: lm317_vin_input
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate:
                        root.calculate_lm317_voltage(lm317_vout_input.text, \
                        lm317_r1_input.text, lm317_iout_input.text, lm317_vin_input.text)

            MDRelativeLayout:
                size_hint_y: None
                height: lm_calc_voltage.height

                MDRaisedButton:
                    id: lm_calc_voltage
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.calculate_lm317_voltage(lm317_vout_input.text, \
                        lm317_r1_input.text, lm317_iout_input.text, lm317_vin_input.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Сопротивление R2, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r2_output

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Стандартное сопротивление R2, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r2_corrected_output

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Выходное напряжение, В:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_vout_output

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Рекомендуемый тип стабилизатора:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_recommend_output

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Рассеиваемая мощность:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_power_output

    MDTopAppBar:
        id: lm_regulator_voltage_top_bar
        title: "LM317/LM350/LM338 - стабилизатор напряжения"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1


<LMRegulatorCalculateCurrentScreen>:
    name: "lm_regulator_current_screen"

    MDScrollView:
        pos_hint: {"top": (root.height - lm_regulator_current_top_bar.height) / root.height}
        size_hint_y: (root.height - lm_regulator_current_top_bar.height) / root.height

        MDList:
            spacing: "10dp"
            padding: "15dp", "10dp"

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Выходной ток, А"

                MDTextField:
                    id: lm317_iout_input_cur
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate: lm317_vout_input_cur.focus = True

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15), 0
                spacing: sp(15)

                MDLabel:
                    text: "Падение напряжения на нагрузке, В:"

                MDTextField:
                    id: lm317_vout_input_cur
                    halign: "center"
                    size_hint_x: 0.6
                    on_text_validate:
                        root.calculate_lm317_current(lm317_iout_input_cur.text, \
                        lm317_vout_input_cur.text)

            MDRelativeLayout:
                size_hint_y: None
                height: lm_calc_current.height

                MDRaisedButton:
                    id: lm_calc_current
                    text: "Рассчитать"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5}
                    on_release:
                        root.calculate_lm317_current(lm317_iout_input_cur.text, \
                        lm317_vout_input_cur.text)

            MDCard:
                size_hint_y: None
                height: self.minimum_height
                padding: sp(15)
                spacing: sp(25)
                orientation: "vertical"

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Сопротивление R1, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r1_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Сопротивление R1 из стандартного ряда, Ом:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r1_corrected_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Мощность, Вт:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r1_power_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Мощность с резистором из стандартного ряда, Вт:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_r1_power_corrected_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Выходной ток с резистором из стандартного ряда, А:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_iout_corrected_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Рекомендуемый тип стабилизатора:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_recommend_output_cur

                MDBoxLayout:
                    adaptive_height: True

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        text: "Входное напряжение, не менее, В:"

                    MDLabel:
                        size_hint_y: None
                        height: self.font_size
                        id: lm317_vin_output_cur

    MDTopAppBar:
        id: lm_regulator_current_top_bar
        title: "LM317/LM350/LM338 - стабилизатор тока"
        pos_hint: {"top": 1}
        left_action_items: [["arrow-left", lambda x: app.back_to_screen()]]
        elevation: 1

